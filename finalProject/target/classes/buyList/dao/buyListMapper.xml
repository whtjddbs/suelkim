<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="buyListSQL">
	<select id="getAllBuyList" resultType="buylist">
		select * from buylist order by serial desc
	</select>
	
	<select id="getdeliveryDetail" parameterType="String" resultType="java.util.Map">
		select * from serialmapper
		join buylist using(serial)
		join item using(seq)
		where serial=#{serial}
	</select>
	
	<select id="getBuyList" parameterType="map" resultType="buylist">
		select * from buylist
		where status like '%${status}%'
		and logtime between #{startDate} and to_date(#{endDate}, 'YYYY-MM-DD')+1
		order by serial desc
	</select>
	
	<update id="changeStatus" parameterType="map">
		update buylist set status=#{status} 
		where serial in 
		<foreach collection="serials" item="serial" separator="," open="(" close=")">
			#{serial}
		</foreach>
	</update>
</mapper>